function updateCount(e,t){browser.tabs.query({}).then(r=>{let o=r.length;t&&e&&r.map(e=>e.id).includes(e)&&o--,browser.browserAction.setBadgeText({text:o.toString()}),browser.browserAction.setBadgeBackgroundColor({color:"rgba(0,0,0,1)"})})}browser.tabs.onRemoved.addListener(e=>{updateCount(e,!0)}),browser.tabs.onCreated.addListener(e=>{updateCount(e,!1)}),browser.browserAction.onClicked.addListener(function(e){chrome.tabs.create({url:chrome.extension.getURL("background.html")})}),updateCount();